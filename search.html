<html><head>
      <meta charset="UTF-8">
      <title>Hello World!</title>
      <style>
         div{
            display: flex;
            height: 100vh;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            font-size: 20px;
         }
         table,td,th{
            border:1px solid #000;
            border-collapse: collapse;
            padding: 10px;
         }
      </style>
   
   </head>
   <body>
     
      <div style="
    font-family: fantasy;
">
<a href="/">Home</a>
   <input type="search" name="phoneNumber"/>
   <button>Search</button>
   <h1>Files</h1>
   <table>
      <thead>
      <tr>
         <th>Filename</th>
         <th>Description</th>
         <th>Hash</th>
         <th>Size</th>
         <th>Date</th>
         <th>Action</th>
      </tr>
      </thead>
      <tbody></tbody>
   </table>
      <script>
         const call = async ()=>{
         let tbody = document.querySelector('tbody');
         Array.from(tbody.children).forEach(elem=>elem.remove())
         console.log(tbody);
         let phoneNumber = document.querySelector("input").value;
         let response = await fetch("/search/"+phoneNumber);
         let files = await response.json();
         console.log(files);
         files.forEach(file=>{
            let tr=document.createElement('tr');
            let td,text;

            td=document.createElement('td');
            text = document.createTextNode(file.title);
            td.append(text);
            tr.append(td);

            td=document.createElement('td');
            text = document.createTextNode(file.description);
            td.append(text);
            tr.append(td);

            td=document.createElement('td');
            text = document.createTextNode(file.hash);
            td.append(text);
            tr.append(td);

            td=document.createElement('td');
            text = document.createTextNode(file.size+" bytes");
            td.append(text);
            tr.append(td);

            td=document.createElement('td');
            text = document.createTextNode(new Date(file.date).toString());
            td.append(text);
            tr.append(td);

            td=document.createElement('td');
            a = document.createElement('a');
            a.href="/request/"+file.permission+"/"+file.hash;
            text = document.createTextNode("Ask Permission");
            a.appendChild(text);
            td.appendChild(a);
            
            tr.appendChild(td);

            document.querySelector("tbody").appendChild(tr);


         })
         }
         document.querySelector('button').addEventListener('click',call);
      </script>
</div>
</body></html>